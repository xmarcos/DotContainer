language: php
matrix:
  include:
    - php: 5.4
      env: WITH_LOWEST=true
    - php: 5.5
      env: WITH_LOWEST=true
    - php: 5.6
      env: WITH_LOWEST=true
    - php: 7
    - php: 7.1
fast_finish: true
cache:
  directories:
    - $HOME/.composer/cache
    - $HOME/.php_cs.cache
before_script:
  - phpenv config-rm xdebug.ini
  - phpenv rehash
before_install:
  - composer validate
install:
  - >-
    if [[ "$WITH_LOWEST" == "true" ]]; then composer update --prefer-lowest;
    else composer install --prefer-source; fi;
script:
  - composer test
notifications:
  email: false
